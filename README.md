# æ‰¶é¤Šã‚ã‹ã‚‹ã‚“ã§ã™ ğŸ’°

å­¦ç”Ÿãƒ»ã‚¢ãƒ«ãƒã‚¤ãƒˆå‘ã‘ã®æ‰¶é¤Šæ§é™¤è¨ˆç®—ãƒ»ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

[![CI/CD](https://github.com/JunP1ayer/huyou-wakarundesu/actions/workflows/deploy.yml/badge.svg)](https://github.com/JunP1ayer/huyou-wakarundesu/actions/workflows/deploy.yml)
[![Coverage](https://img.shields.io/badge/coverage-8.6%25-orange)](./coverage/lcov-report/index.html)
[![Tests](https://img.shields.io/badge/tests-116%20passing-brightgreen)](./test-results/)

## ğŸ¯ æ¦‚è¦

æ‰¶é¤Šæ§é™¤ã®è¤‡é›‘ãªåˆ¶åº¦ã‚’ç°¡å˜ã«ç†è§£ã—ã€é©åˆ‡ãªç¯„å›²å†…ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆãŒã§ãã‚‹ã‚ˆã†ã‚µãƒãƒ¼ãƒˆã™ã‚‹Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½
- ğŸ§® **æ‰¶é¤Šæ§é™¤è‡ªå‹•è¨ˆç®—**: 103ä¸‡å††ã€106ä¸‡å††ã€130ä¸‡å††ã®å£ã‚’è‡ªå‹•åˆ¤å®š
- ğŸ“Š **åå…¥ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®åå…¥çŠ¶æ³ã¨æ®‹ã‚Šå¯èƒ½é¡ã‚’è¡¨ç¤º
- ğŸ¦ **éŠ€è¡ŒAPIé€£æº**: è‡ªå‹•åå…¥è¿½è·¡ï¼ˆMoneyTreeé€£æºï¼‰
- ğŸ”” **é–¾å€¤é€šçŸ¥**: æ‰¶é¤Šæ§é™¤ä¸Šé™ã¸ã®æ¥è¿‘ã‚¢ãƒ©ãƒ¼ãƒˆ
- ğŸ“± **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**: PWAå¯¾å¿œã§ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã‚‚å¿«é©åˆ©ç”¨

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Node.js 18.20.0 ä»¥ä¸Š
- npm 9.0.0 ä»¥ä¸Š
- Supabase ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/JunP1ayer/huyou-wakarundesu.git
cd huyou-wakarundesu

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm ci --legacy-peer-deps

# ç’°å¢ƒå¤‰æ•°è¨­å®š
npm run setup

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev
```

### ç’°å¢ƒå¤‰æ•°
```bash
# å¿…é ˆ
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³
OPENAI_API_KEY=your_openai_key  # AI ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ç”¨
VERCEL_TOKEN=your_vercel_token  # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆç”¨
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆ

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
```bash
# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰
npm run test:watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ç¢ºèª
npm run test:coverage
```

### E2Eãƒ†ã‚¹ãƒˆ
```bash
# E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npm run test:e2e

# UIãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
npm run test:e2e:ui

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰
npm run test:e2e:debug
```

## ğŸ“‹ ãƒ†ã‚¹ãƒˆãƒãƒªã‚·ãƒ¼

### Flaky Test Zero Tolerance
**é‡è¦**: Flaky ãƒ†ã‚¹ãƒˆã¯ **14æ—¥ä»¥å†…** ã«ä¿®æ­£ã¾ãŸã¯ç„¡åŠ¹åŒ–ãŒå¿…è¦ã§ã™ã€‚

- **è‡ªå‹•æ¤œçŸ¥**: æ¯æ—¥åˆå‰3æ™‚ã« Flaky ãƒ†ã‚¹ãƒˆæ¤œçŸ¥å®Ÿè¡Œ
- **Issueè‡ªå‹•ä½œæˆ**: `flaky-test` ãƒ©ãƒ™ãƒ«ä»˜ãã§ GitHub Issue ç”Ÿæˆ
- **è§£æ±ºæœŸé™**: æ¤œçŸ¥ã‹ã‚‰2é€±é–“ä»¥å†…ã®å¯¾å¿œå¿…é ˆ

è©³ç´°ã¯ [Testing Policy](./docs/testing.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Frontend**: Next.js 15.3.4, React 19, TypeScript
- **Backend**: Supabase (PostgreSQL + Auth + Edge Functions)
- **Testing**: Jest, Playwright, React Testing Library
- **CI/CD**: GitHub Actions, Vercel
- **Monitoring**: Sentry, Google Analytics

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
â”œâ”€â”€ app/                    # Next.js App Router
â”œâ”€â”€ components/            # React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ lib/                   # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ hooks/                 # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ e2e/                   # E2Eãƒ†ã‚¹ãƒˆ (Playwright)
â”œâ”€â”€ __tests__/             # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ (Jest)
â”œâ”€â”€ docs/                  # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ supabase/              # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### Vercel (æœ¬ç•ªç’°å¢ƒ)
```bash
# è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤: main ãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ã§è‡ªå‹•å®Ÿè¡Œ
git push origin main

# æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy
```

### å“è³ªã‚²ãƒ¼ãƒˆ
- âœ… ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå…¨é€šé (116/116)
- âœ… ESLintè­¦å‘Š < 50
- âœ… TypeScriptå‹ãƒã‚§ãƒƒã‚¯é€šé
- âœ… E2Eãƒ†ã‚¹ãƒˆé€šé (Flakyè¨±å®¹)

## ğŸ“Š ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### ç¾åœ¨ã®çŠ¶æ³
- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 8.6% â†’ ç›®æ¨™ 25%
- **ãƒ†ã‚¹ãƒˆæ•°**: 116 tests (å…¨é€šé)
- **Flaky Tests**: 0 (ç›®æ¨™ç¶­æŒ)
- **CIæˆåŠŸç‡**: >95%

### æ”¹å–„ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
1. **Phase 1** (2é€±é–“): Flaky ãƒ†ã‚¹ãƒˆå®Œå…¨æ’²æ»…
2. **Phase 2** (4é€±é–“): ã‚«ãƒãƒ¬ãƒƒã‚¸ 25% é”æˆ
3. **Phase 3** (6é€±é–“): ãƒŸãƒ¥ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

## ğŸ¤ è²¢çŒ®

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¦ä»¶
- [ ] ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆé€šé
- [ ] ESLint/TypeScript ã‚¨ãƒ©ãƒ¼ãªã—
- [ ] E2Eãƒ†ã‚¹ãƒˆé€šé
- [ ] `e2e/**` å¤‰æ›´æ™‚ã¯QAãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆ

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
- **CODEOWNERS**: E2E ãƒ†ã‚¹ãƒˆå¤‰æ›´æ™‚ã¯å¿…é ˆãƒ¬ãƒ“ãƒ¥ãƒ¼
- **å“è³ªåŸºæº–**: ãƒ†ã‚¹ãƒˆãƒãƒªã‚·ãƒ¼æº–æ‹ 
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: é‡è¦ãªå¤‰æ›´ã¯ `docs/` æ›´æ–°

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ
1. **ç’°å¢ƒå¤‰æ•°ã‚¨ãƒ©ãƒ¼**: `npm run verify-env` ã§ç¢ºèª
2. **èªè¨¼å•é¡Œ**: Supabaseè¨­å®šã‚’ `docs/NEW_AUTH_DESIGN.md` ã§ç¢ºèª
3. **ãƒ†ã‚¹ãƒˆå¤±æ•—**: `docs/testing.md` ã®ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ç¢ºèª

### ã‚µãƒãƒ¼ãƒˆ
- **Issues**: GitHub Issues ã§å ±å‘Š
- **ç·Šæ€¥æ™‚**: `flaky-test` ãƒ©ãƒ™ãƒ«ã§å„ªå…ˆå¯¾å¿œ
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: `docs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‚ç…§

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License - è©³ç´°ã¯ [LICENSE](./LICENSE) ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [æœ¬ç•ªã‚µã‚¤ãƒˆ](https://huyou-wakarundesu.vercel.app)
- [ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°](https://huyou-wakarundesu-git-main.vercel.app)
- [ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ](./coverage/lcov-report/index.html)
- [GitHub Actions](https://github.com/JunP1ayer/huyou-wakarundesu/actions)

---

æœ€çµ‚æ›´æ–°: 2025-01-14